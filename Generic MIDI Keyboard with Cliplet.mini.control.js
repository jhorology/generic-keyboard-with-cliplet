(function(){var a=this,b=a._,c=Array.prototype,d=Object.prototype,e=Function.prototype,f=c.push,g=c.slice,h=c.concat,i=d.toString,j=d.hasOwnProperty,k=Array.isArray,l=Object.keys,m=e.bind,n=function(a){return a instanceof n?a:this instanceof n?void(this._wrapped=a):new n(a)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=n),exports._=n):a._=n,n.VERSION="1.7.0";var o=function(a,b,c){if(void 0===b)return a;switch(null==c?3:c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return function(){return a.apply(b,arguments)}};n.iteratee=function(a,b,c){return null==a?n.identity:n.isFunction(a)?o(a,b,c):n.isObject(a)?n.matches(a):n.property(a)},n.each=n.forEach=function(a,b,c){if(null==a)return a;b=o(b,c);var d,e=a.length;if(e===+e)for(d=0;e>d;d++)b(a[d],d,a);else{var f=n.keys(a);for(d=0,e=f.length;e>d;d++)b(a[f[d]],f[d],a)}return a},n.map=n.collect=function(a,b,c){if(null==a)return[];b=n.iteratee(b,c);for(var d,e=a.length!==+a.length&&n.keys(a),f=(e||a).length,g=Array(f),h=0;f>h;h++)d=e?e[h]:h,g[h]=b(a[d],d,a);return g};var p="Reduce of empty array with no initial value";n.reduce=n.foldl=n.inject=function(a,b,c,d){null==a&&(a=[]),b=o(b,d,4);var e,f=a.length!==+a.length&&n.keys(a),g=(f||a).length,h=0;if(arguments.length<3){if(!g)throw new TypeError(p);c=a[f?f[h++]:h++]}for(;g>h;h++)e=f?f[h]:h,c=b(c,a[e],e,a);return c},n.reduceRight=n.foldr=function(a,b,c,d){null==a&&(a=[]),b=o(b,d,4);var e,f=a.length!==+a.length&&n.keys(a),g=(f||a).length;if(arguments.length<3){if(!g)throw new TypeError(p);c=a[f?f[--g]:--g]}for(;g--;)e=f?f[g]:g,c=b(c,a[e],e,a);return c},n.find=n.detect=function(a,b,c){var d;return b=n.iteratee(b,c),n.some(a,function(a,c,e){return b(a,c,e)?(d=a,!0):void 0}),d},n.filter=n.select=function(a,b,c){var d=[];return null==a?d:(b=n.iteratee(b,c),n.each(a,function(a,c,e){b(a,c,e)&&d.push(a)}),d)},n.reject=function(a,b,c){return n.filter(a,n.negate(n.iteratee(b)),c)},n.every=n.all=function(a,b,c){if(null==a)return!0;b=n.iteratee(b,c);var d,e,f=a.length!==+a.length&&n.keys(a),g=(f||a).length;for(d=0;g>d;d++)if(e=f?f[d]:d,!b(a[e],e,a))return!1;return!0},n.some=n.any=function(a,b,c){if(null==a)return!1;b=n.iteratee(b,c);var d,e,f=a.length!==+a.length&&n.keys(a),g=(f||a).length;for(d=0;g>d;d++)if(e=f?f[d]:d,b(a[e],e,a))return!0;return!1},n.contains=n.include=function(a,b){return null==a?!1:(a.length!==+a.length&&(a=n.values(a)),n.indexOf(a,b)>=0)},n.invoke=function(a,b){var c=g.call(arguments,2),d=n.isFunction(b);return n.map(a,function(a){return(d?b:a[b]).apply(a,c)})},n.pluck=function(a,b){return n.map(a,n.property(b))},n.where=function(a,b){return n.filter(a,n.matches(b))},n.findWhere=function(a,b){return n.find(a,n.matches(b))},n.max=function(a,b,c){var d,e,f=-1/0,g=-1/0;if(null==b&&null!=a){a=a.length===+a.length?a:n.values(a);for(var h=0,i=a.length;i>h;h++)d=a[h],d>f&&(f=d)}else b=n.iteratee(b,c),n.each(a,function(a,c,d){e=b(a,c,d),(e>g||e===-1/0&&f===-1/0)&&(f=a,g=e)});return f},n.min=function(a,b,c){var d,e,f=1/0,g=1/0;if(null==b&&null!=a){a=a.length===+a.length?a:n.values(a);for(var h=0,i=a.length;i>h;h++)d=a[h],f>d&&(f=d)}else b=n.iteratee(b,c),n.each(a,function(a,c,d){e=b(a,c,d),(g>e||1/0===e&&1/0===f)&&(f=a,g=e)});return f},n.shuffle=function(a){for(var b,c=a&&a.length===+a.length?a:n.values(a),d=c.length,e=Array(d),f=0;d>f;f++)b=n.random(0,f),b!==f&&(e[f]=e[b]),e[b]=c[f];return e},n.sample=function(a,b,c){return null==b||c?(a.length!==+a.length&&(a=n.values(a)),a[n.random(a.length-1)]):n.shuffle(a).slice(0,Math.max(0,b))},n.sortBy=function(a,b,c){return b=n.iteratee(b,c),n.pluck(n.map(a,function(a,c,d){return{value:a,index:c,criteria:b(a,c,d)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(d>c||void 0===d)return-1}return a.index-b.index}),"value")};var q=function(a){return function(b,c,d){var e={};return c=n.iteratee(c,d),n.each(b,function(d,f){var g=c(d,f,b);a(e,d,g)}),e}};n.groupBy=q(function(a,b,c){n.has(a,c)?a[c].push(b):a[c]=[b]}),n.indexBy=q(function(a,b,c){a[c]=b}),n.countBy=q(function(a,b,c){n.has(a,c)?a[c]++:a[c]=1}),n.sortedIndex=function(a,b,c,d){c=n.iteratee(c,d,1);for(var e=c(b),f=0,g=a.length;g>f;){var h=f+g>>>1;c(a[h])<e?f=h+1:g=h}return f},n.toArray=function(a){return a?n.isArray(a)?g.call(a):a.length===+a.length?n.map(a,n.identity):n.values(a):[]},n.size=function(a){return null==a?0:a.length===+a.length?a.length:n.keys(a).length},n.partition=function(a,b,c){b=n.iteratee(b,c);var d=[],e=[];return n.each(a,function(a,c,f){(b(a,c,f)?d:e).push(a)}),[d,e]},n.first=n.head=n.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:0>b?[]:g.call(a,0,b)},n.initial=function(a,b,c){return g.call(a,0,Math.max(0,a.length-(null==b||c?1:b)))},n.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:g.call(a,Math.max(a.length-b,0))},n.rest=n.tail=n.drop=function(a,b,c){return g.call(a,null==b||c?1:b)},n.compact=function(a){return n.filter(a,n.identity)};var r=function(a,b,c,d){if(b&&n.every(a,n.isArray))return h.apply(d,a);for(var e=0,g=a.length;g>e;e++){var i=a[e];n.isArray(i)||n.isArguments(i)?b?f.apply(d,i):r(i,b,c,d):c||d.push(i)}return d};n.flatten=function(a,b){return r(a,b,!1,[])},n.without=function(a){return n.difference(a,g.call(arguments,1))},n.uniq=n.unique=function(a,b,c,d){if(null==a)return[];n.isBoolean(b)||(d=c,c=b,b=!1),null!=c&&(c=n.iteratee(c,d));for(var e=[],f=[],g=0,h=a.length;h>g;g++){var i=a[g];if(b)g&&f===i||e.push(i),f=i;else if(c){var j=c(i,g,a);n.indexOf(f,j)<0&&(f.push(j),e.push(i))}else n.indexOf(e,i)<0&&e.push(i)}return e},n.union=function(){return n.uniq(r(arguments,!0,!0,[]))},n.intersection=function(a){if(null==a)return[];for(var b=[],c=arguments.length,d=0,e=a.length;e>d;d++){var f=a[d];if(!n.contains(b,f)){for(var g=1;c>g&&n.contains(arguments[g],f);g++);g===c&&b.push(f)}}return b},n.difference=function(a){var b=r(g.call(arguments,1),!0,!0,[]);return n.filter(a,function(a){return!n.contains(b,a)})},n.zip=function(a){if(null==a)return[];for(var b=n.max(arguments,"length").length,c=Array(b),d=0;b>d;d++)c[d]=n.pluck(arguments,d);return c},n.object=function(a,b){if(null==a)return{};for(var c={},d=0,e=a.length;e>d;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},n.indexOf=function(a,b,c){if(null==a)return-1;var d=0,e=a.length;if(c){if("number"!=typeof c)return d=n.sortedIndex(a,b),a[d]===b?d:-1;d=0>c?Math.max(0,e+c):c}for(;e>d;d++)if(a[d]===b)return d;return-1},n.lastIndexOf=function(a,b,c){if(null==a)return-1;var d=a.length;for("number"==typeof c&&(d=0>c?d+c+1:Math.min(d,c+1));--d>=0;)if(a[d]===b)return d;return-1},n.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=c||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=Array(d),f=0;d>f;f++,a+=c)e[f]=a;return e};var s=function(){};n.bind=function(a,b){var c,d;if(m&&a.bind===m)return m.apply(a,g.call(arguments,1));if(!n.isFunction(a))throw new TypeError("Bind must be called on a function");return c=g.call(arguments,2),d=function(){if(!(this instanceof d))return a.apply(b,c.concat(g.call(arguments)));s.prototype=a.prototype;var e=new s;s.prototype=null;var f=a.apply(e,c.concat(g.call(arguments)));return n.isObject(f)?f:e}},n.partial=function(a){var b=g.call(arguments,1);return function(){for(var c=0,d=b.slice(),e=0,f=d.length;f>e;e++)d[e]===n&&(d[e]=arguments[c++]);for(;c<arguments.length;)d.push(arguments[c++]);return a.apply(this,d)}},n.bindAll=function(a){var b,c,d=arguments.length;if(1>=d)throw new Error("bindAll must be passed function names");for(b=1;d>b;b++)c=arguments[b],a[c]=n.bind(a[c],a);return a},n.memoize=function(a,b){var c=function(d){var e=c.cache,f=b?b.apply(this,arguments):d;return n.has(e,f)||(e[f]=a.apply(this,arguments)),e[f]};return c.cache={},c},n.delay=function(a,b){var c=g.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},n.defer=function(a){return n.delay.apply(n,[a,1].concat(g.call(arguments,1)))},n.throttle=function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=c.leading===!1?0:n.now(),g=null,f=a.apply(d,e),g||(d=e=null)};return function(){var j=n.now();h||c.leading!==!1||(h=j);var k=b-(j-h);return d=this,e=arguments,0>=k||k>b?(clearTimeout(g),g=null,h=j,f=a.apply(d,e),g||(d=e=null)):g||c.trailing===!1||(g=setTimeout(i,k)),f}},n.debounce=function(a,b,c){var d,e,f,g,h,i=function(){var j=n.now()-g;b>j&&j>0?d=setTimeout(i,b-j):(d=null,c||(h=a.apply(f,e),d||(f=e=null)))};return function(){f=this,e=arguments,g=n.now();var j=c&&!d;return d||(d=setTimeout(i,b)),j&&(h=a.apply(f,e),f=e=null),h}},n.wrap=function(a,b){return n.partial(b,a)},n.negate=function(a){return function(){return!a.apply(this,arguments)}},n.compose=function(){var a=arguments,b=a.length-1;return function(){for(var c=b,d=a[b].apply(this,arguments);c--;)d=a[c].call(this,d);return d}},n.after=function(a,b){return function(){return--a<1?b.apply(this,arguments):void 0}},n.before=function(a,b){var c;return function(){return--a>0?c=b.apply(this,arguments):b=null,c}},n.once=n.partial(n.before,2),n.keys=function(a){if(!n.isObject(a))return[];if(l)return l(a);var b=[];for(var c in a)n.has(a,c)&&b.push(c);return b},n.values=function(a){for(var b=n.keys(a),c=b.length,d=Array(c),e=0;c>e;e++)d[e]=a[b[e]];return d},n.pairs=function(a){for(var b=n.keys(a),c=b.length,d=Array(c),e=0;c>e;e++)d[e]=[b[e],a[b[e]]];return d},n.invert=function(a){for(var b={},c=n.keys(a),d=0,e=c.length;e>d;d++)b[a[c[d]]]=c[d];return b},n.functions=n.methods=function(a){var b=[];for(var c in a)n.isFunction(a[c])&&b.push(c);return b.sort()},n.extend=function(a){if(!n.isObject(a))return a;for(var b,c,d=1,e=arguments.length;e>d;d++){b=arguments[d];for(c in b)j.call(b,c)&&(a[c]=b[c])}return a},n.pick=function(a,b,c){var d,e={};if(null==a)return e;if(n.isFunction(b)){b=o(b,c);for(d in a){var f=a[d];b(f,d,a)&&(e[d]=f)}}else{var i=h.apply([],g.call(arguments,1));a=new Object(a);for(var j=0,k=i.length;k>j;j++)d=i[j],d in a&&(e[d]=a[d])}return e},n.omit=function(a,b,c){if(n.isFunction(b))b=n.negate(b);else{var d=n.map(h.apply([],g.call(arguments,1)),String);b=function(a,b){return!n.contains(d,b)}}return n.pick(a,b,c)},n.defaults=function(a){if(!n.isObject(a))return a;for(var b=1,c=arguments.length;c>b;b++){var d=arguments[b];for(var e in d)void 0===a[e]&&(a[e]=d[e])}return a},n.clone=function(a){return n.isObject(a)?n.isArray(a)?a.slice():n.extend({},a):a},n.tap=function(a,b){return b(a),a};var t=function(a,b,c,d){if(a===b)return 0!==a||1/a===1/b;if(null==a||null==b)return a===b;a instanceof n&&(a=a._wrapped),b instanceof n&&(b=b._wrapped);var e=i.call(a);if(e!==i.call(b))return!1;switch(e){case"[object RegExp]":case"[object String]":return""+a==""+b;case"[object Number]":return+a!==+a?+b!==+b:0===+a?1/+a===1/b:+a===+b;case"[object Date]":case"[object Boolean]":return+a===+b}if("object"!=typeof a||"object"!=typeof b)return!1;for(var f=c.length;f--;)if(c[f]===a)return d[f]===b;var g=a.constructor,h=b.constructor;if(g!==h&&"constructor"in a&&"constructor"in b&&!(n.isFunction(g)&&g instanceof g&&n.isFunction(h)&&h instanceof h))return!1;c.push(a),d.push(b);var j,k;if("[object Array]"===e){if(j=a.length,k=j===b.length)for(;j--&&(k=t(a[j],b[j],c,d)););}else{var l,m=n.keys(a);if(j=m.length,k=n.keys(b).length===j)for(;j--&&(l=m[j],k=n.has(b,l)&&t(a[l],b[l],c,d)););}return c.pop(),d.pop(),k};n.isEqual=function(a,b){return t(a,b,[],[])},n.isEmpty=function(a){if(null==a)return!0;if(n.isArray(a)||n.isString(a)||n.isArguments(a))return 0===a.length;for(var b in a)if(n.has(a,b))return!1;return!0},n.isElement=function(a){return!(!a||1!==a.nodeType)},n.isArray=k||function(a){return"[object Array]"===i.call(a)},n.isObject=function(a){var b=typeof a;return"function"===b||"object"===b&&!!a},n.each(["Arguments","Function","String","Number","Date","RegExp"],function(a){n["is"+a]=function(b){return i.call(b)==="[object "+a+"]"}}),n.isArguments(arguments)||(n.isArguments=function(a){return n.has(a,"callee")}),"function"!=typeof/./&&(n.isFunction=function(a){return"function"==typeof a||!1}),n.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},n.isNaN=function(a){return n.isNumber(a)&&a!==+a},n.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"===i.call(a)},n.isNull=function(a){return null===a},n.isUndefined=function(a){return void 0===a},n.has=function(a,b){return null!=a&&j.call(a,b)},n.noConflict=function(){return a._=b,this},n.identity=function(a){return a},n.constant=function(a){return function(){return a}},n.noop=function(){},n.property=function(a){return function(b){return b[a]}},n.matches=function(a){var b=n.pairs(a),c=b.length;return function(a){if(null==a)return!c;a=new Object(a);for(var d=0;c>d;d++){var e=b[d],f=e[0];if(e[1]!==a[f]||!(f in a))return!1}return!0}},n.times=function(a,b,c){var d=Array(Math.max(0,a));b=o(b,c,1);for(var e=0;a>e;e++)d[e]=b(e);return d},n.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))},n.now=Date.now||function(){return(new Date).getTime()};var u={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},v=n.invert(u),w=function(a){var b=function(b){return a[b]},c="(?:"+n.keys(a).join("|")+")",d=RegExp(c),e=RegExp(c,"g");return function(a){return a=null==a?"":""+a,d.test(a)?a.replace(e,b):a}};n.escape=w(u),n.unescape=w(v),n.result=function(a,b){if(null==a)return void 0;var c=a[b];return n.isFunction(c)?a[b]():c};var x=0;n.uniqueId=function(a){var b=++x+"";return a?a+b:b},n.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var y=/(.)^/,z={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},A=/\\|'|\r|\n|\u2028|\u2029/g,B=function(a){return"\\"+z[a]};n.template=function(a,b,c){!b&&c&&(b=c),b=n.defaults({},b,n.templateSettings);var d=RegExp([(b.escape||y).source,(b.interpolate||y).source,(b.evaluate||y).source].join("|")+"|$","g"),e=0,f="__p+='";a.replace(d,function(b,c,d,g,h){return f+=a.slice(e,h).replace(A,B),e=h+b.length,c?f+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'":d?f+="'+\n((__t=("+d+"))==null?'':__t)+\n'":g&&(f+="';\n"+g+"\n__p+='"),b}),f+="';\n",b.variable||(f="with(obj||{}){\n"+f+"}\n"),f="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+f+"return __p;\n";try{var g=new Function(b.variable||"obj","_",f)}catch(h){throw h.source=f,h}var i=function(a){return g.call(this,a,n)},j=b.variable||"obj";return i.source="function("+j+"){\n"+f+"}",i},n.chain=function(a){var b=n(a);return b._chain=!0,b};var C=function(a){return this._chain?n(a).chain():a};n.mixin=function(a){n.each(n.functions(a),function(b){var c=n[b]=a[b];n.prototype[b]=function(){var a=[this._wrapped];return f.apply(a,arguments),C.call(this,c.apply(n,a))}})},n.mixin(n),n.each(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=c[a];n.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!==a&&"splice"!==a||0!==c.length||delete c[0],C.call(this,c)}}),n.each(["concat","join","slice"],function(a){var b=c[a];n.prototype[a]=function(){return C.call(this,b.apply(this._wrapped,arguments))}}),n.prototype.value=function(){return this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return n})}).call(this),function(a,b){if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(c,d,e){a.Backbone=b(a,e,c,d)});else if("undefined"!=typeof exports){var c=require("underscore");b(a,exports,c)}else a.Backbone=b(a,{},a._,a.jQuery||a.Zepto||a.ender||a.$)}(this,function(a,b,c,d){{var e=a.Backbone,f=[],g=(f.push,f.slice);f.splice}b.VERSION="1.1.2",b.$=d,b.noConflict=function(){return a.Backbone=e,this},b.emulateHTTP=!1,b.emulateJSON=!1;var h=b.Events={on:function(a,b,c){if(!j(this,"on",a,[b,c])||!b)return this;this._events||(this._events={});var d=this._events[a]||(this._events[a]=[]);return d.push({callback:b,context:c,ctx:c||this}),this},once:function(a,b,d){if(!j(this,"once",a,[b,d])||!b)return this;var e=this,f=c.once(function(){e.off(a,f),b.apply(this,arguments)});return f._callback=b,this.on(a,f,d)},off:function(a,b,d){var e,f,g,h,i,k,l,m;if(!this._events||!j(this,"off",a,[b,d]))return this;if(!a&&!b&&!d)return this._events=void 0,this;for(h=a?[a]:c.keys(this._events),i=0,k=h.length;k>i;i++)if(a=h[i],g=this._events[a]){if(this._events[a]=e=[],b||d)for(l=0,m=g.length;m>l;l++)f=g[l],(b&&b!==f.callback&&b!==f.callback._callback||d&&d!==f.context)&&e.push(f);e.length||delete this._events[a]}return this},trigger:function(a){if(!this._events)return this;var b=g.call(arguments,1);if(!j(this,"trigger",a,b))return this;var c=this._events[a],d=this._events.all;return c&&k(c,b),d&&k(d,arguments),this},stopListening:function(a,b,d){var e=this._listeningTo;if(!e)return this;var f=!b&&!d;d||"object"!=typeof b||(d=this),a&&((e={})[a._listenId]=a);for(var g in e)a=e[g],a.off(b,d,this),(f||c.isEmpty(a._events))&&delete this._listeningTo[g];return this}},i=/\s+/,j=function(a,b,c,d){if(!c)return!0;if("object"==typeof c){for(var e in c)a[b].apply(a,[e,c[e]].concat(d));return!1}if(i.test(c)){for(var f=c.split(i),g=0,h=f.length;h>g;g++)a[b].apply(a,[f[g]].concat(d));return!1}return!0},k=function(a,b){var c,d=-1,e=a.length,f=b[0],g=b[1],h=b[2];switch(b.length){case 0:for(;++d<e;)(c=a[d]).callback.call(c.ctx);return;case 1:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f);return;case 2:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g);return;case 3:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g,h);return;default:for(;++d<e;)(c=a[d]).callback.apply(c.ctx,b);return}},l={listenTo:"on",listenToOnce:"once"};c.each(l,function(a,b){h[b]=function(b,d,e){var f=this._listeningTo||(this._listeningTo={}),g=b._listenId||(b._listenId=c.uniqueId("l"));return f[g]=b,e||"object"!=typeof d||(e=this),b[a](d,e,this),this}}),h.bind=h.on,h.unbind=h.off,c.extend(b,h);var m=b.Model=function(a,b){var d=a||{};b||(b={}),this.cid=c.uniqueId("c"),this.attributes={},b.collection&&(this.collection=b.collection),b.parse&&(d=this.parse(d,b)||{}),d=c.defaults({},d,c.result(this,"defaults")),this.set(d,b),this.changed={},this.initialize.apply(this,arguments)};c.extend(m.prototype,h,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return c.clone(this.attributes)},sync:function(){return b.sync.apply(this,arguments)},get:function(a){return this.attributes[a]},escape:function(a){return c.escape(this.get(a))},has:function(a){return null!=this.get(a)},set:function(a,b,d){var e,f,g,h,i,j,k,l;if(null==a)return this;if("object"==typeof a?(f=a,d=b):(f={})[a]=b,d||(d={}),!this._validate(f,d))return!1;g=d.unset,i=d.silent,h=[],j=this._changing,this._changing=!0,j||(this._previousAttributes=c.clone(this.attributes),this.changed={}),l=this.attributes,k=this._previousAttributes,this.idAttribute in f&&(this.id=f[this.idAttribute]);for(e in f)b=f[e],c.isEqual(l[e],b)||h.push(e),c.isEqual(k[e],b)?delete this.changed[e]:this.changed[e]=b,g?delete l[e]:l[e]=b;if(!i){h.length&&(this._pending=d);for(var m=0,n=h.length;n>m;m++)this.trigger("change:"+h[m],this,l[h[m]],d)}if(j)return this;if(!i)for(;this._pending;)d=this._pending,this._pending=!1,this.trigger("change",this,d);return this._pending=!1,this._changing=!1,this},unset:function(a,b){return this.set(a,void 0,c.extend({},b,{unset:!0}))},clear:function(a){var b={};for(var d in this.attributes)b[d]=void 0;return this.set(b,c.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!c.isEmpty(this.changed):c.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?c.clone(this.changed):!1;var b,d=!1,e=this._changing?this._previousAttributes:this.attributes;for(var f in a)c.isEqual(e[f],b=a[f])||((d||(d={}))[f]=b);return d},previous:function(a){return null!=a&&this._previousAttributes?this._previousAttributes[a]:null},previousAttributes:function(){return c.clone(this._previousAttributes)},fetch:function(a){a=a?c.clone(a):{},void 0===a.parse&&(a.parse=!0);var b=this,d=a.success;return a.success=function(c){return b.set(b.parse(c,a),a)?(d&&d(b,c,a),void b.trigger("sync",b,c,a)):!1},L(this,a),this.sync("read",this,a)},save:function(a,b,d){var e,f,g,h=this.attributes;if(null==a||"object"==typeof a?(e=a,d=b):(e={})[a]=b,d=c.extend({validate:!0},d),e&&!d.wait){if(!this.set(e,d))return!1}else if(!this._validate(e,d))return!1;e&&d.wait&&(this.attributes=c.extend({},h,e)),void 0===d.parse&&(d.parse=!0);var i=this,j=d.success;return d.success=function(a){i.attributes=h;var b=i.parse(a,d);return d.wait&&(b=c.extend(e||{},b)),c.isObject(b)&&!i.set(b,d)?!1:(j&&j(i,a,d),void i.trigger("sync",i,a,d))},L(this,d),f=this.isNew()?"create":d.patch?"patch":"update","patch"===f&&(d.attrs=e),g=this.sync(f,this,d),e&&d.wait&&(this.attributes=h),g},destroy:function(a){a=a?c.clone(a):{};var b=this,d=a.success,e=function(){b.trigger("destroy",b,b.collection,a)};if(a.success=function(c){(a.wait||b.isNew())&&e(),d&&d(b,c,a),b.isNew()||b.trigger("sync",b,c,a)},this.isNew())return a.success(),!1;L(this,a);var f=this.sync("delete",this,a);return a.wait||e(),f},url:function(){var a=c.result(this,"urlRoot")||c.result(this.collection,"url")||K();return this.isNew()?a:a.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(a){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(a){return this._validate({},c.extend(a||{},{validate:!0}))},_validate:function(a,b){if(!b.validate||!this.validate)return!0;a=c.extend({},this.attributes,a);var d=this.validationError=this.validate(a,b)||null;return d?(this.trigger("invalid",this,d,c.extend(b,{validationError:d})),!1):!0}});var n=["keys","values","pairs","invert","pick","omit"];c.each(n,function(a){m.prototype[a]=function(){var b=g.call(arguments);return b.unshift(this.attributes),c[a].apply(c,b)}});var o=b.Collection=function(a,b){b||(b={}),b.model&&(this.model=b.model),void 0!==b.comparator&&(this.comparator=b.comparator),this._reset(),this.initialize.apply(this,arguments),a&&this.reset(a,c.extend({silent:!0},b))},p={add:!0,remove:!0,merge:!0},q={add:!0,remove:!1};c.extend(o.prototype,h,{model:m,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return b.sync.apply(this,arguments)},add:function(a,b){return this.set(a,c.extend({merge:!1},b,q))},remove:function(a,b){var d=!c.isArray(a);a=d?[a]:c.clone(a),b||(b={});var e,f,g,h;for(e=0,f=a.length;f>e;e++)h=a[e]=this.get(a[e]),h&&(delete this._byId[h.id],delete this._byId[h.cid],g=this.indexOf(h),this.models.splice(g,1),this.length--,b.silent||(b.index=g,h.trigger("remove",h,this,b)),this._removeReference(h,b));return d?a[0]:a},set:function(a,b){b=c.defaults({},b,p),b.parse&&(a=this.parse(a,b));var d=!c.isArray(a);a=d?a?[a]:[]:c.clone(a);var e,f,g,h,i,j,k,l=b.at,n=this.model,o=this.comparator&&null==l&&b.sort!==!1,q=c.isString(this.comparator)?this.comparator:null,r=[],s=[],t={},u=b.add,v=b.merge,w=b.remove,x=!o&&u&&w?[]:!1;for(e=0,f=a.length;f>e;e++){if(i=a[e]||{},g=i instanceof m?h=i:i[n.prototype.idAttribute||"id"],j=this.get(g))w&&(t[j.cid]=!0),v&&(i=i===h?h.attributes:i,b.parse&&(i=j.parse(i,b)),j.set(i,b),o&&!k&&j.hasChanged(q)&&(k=!0)),a[e]=j;else if(u){if(h=a[e]=this._prepareModel(i,b),!h)continue;r.push(h),this._addReference(h,b)}h=j||h,!x||!h.isNew()&&t[h.id]||x.push(h),t[h.id]=!0}if(w){for(e=0,f=this.length;f>e;++e)t[(h=this.models[e]).cid]||s.push(h);s.length&&this.remove(s,b)}if(r.length||x&&x.length)if(o&&(k=!0),this.length+=r.length,null!=l)for(e=0,f=r.length;f>e;e++)this.models.splice(l+e,0,r[e]);else{x&&(this.models.length=0);var y=x||r;for(e=0,f=y.length;f>e;e++)this.models.push(y[e])}if(k&&this.sort({silent:!0}),!b.silent){for(e=0,f=r.length;f>e;e++)(h=r[e]).trigger("add",h,this,b);(k||x&&x.length)&&this.trigger("sort",this,b)}return d?a[0]:a},reset:function(a,b){b||(b={});for(var d=0,e=this.models.length;e>d;d++)this._removeReference(this.models[d],b);return b.previousModels=this.models,this._reset(),a=this.add(a,c.extend({silent:!0},b)),b.silent||this.trigger("reset",this,b),a},push:function(a,b){return this.add(a,c.extend({at:this.length},b))},pop:function(a){var b=this.at(this.length-1);return this.remove(b,a),b},unshift:function(a,b){return this.add(a,c.extend({at:0},b))},shift:function(a){var b=this.at(0);return this.remove(b,a),b},slice:function(){return g.apply(this.models,arguments)},get:function(a){return null==a?void 0:this._byId[a]||this._byId[a.id]||this._byId[a.cid]},at:function(a){return this.models[a]},where:function(a,b){return c.isEmpty(a)?b?void 0:[]:this[b?"find":"filter"](function(b){for(var c in a)if(a[c]!==b.get(c))return!1;return!0})},findWhere:function(a){return this.where(a,!0)},sort:function(a){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return a||(a={}),c.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(c.bind(this.comparator,this)),a.silent||this.trigger("sort",this,a),this},pluck:function(a){return c.invoke(this.models,"get",a)},fetch:function(a){a=a?c.clone(a):{},void 0===a.parse&&(a.parse=!0);var b=a.success,d=this;return a.success=function(c){var e=a.reset?"reset":"set";d[e](c,a),b&&b(d,c,a),d.trigger("sync",d,c,a)},L(this,a),this.sync("read",this,a)},create:function(a,b){if(b=b?c.clone(b):{},!(a=this._prepareModel(a,b)))return!1;b.wait||this.add(a,b);var d=this,e=b.success;return b.success=function(a,c){b.wait&&d.add(a,b),e&&e(a,c,b)},a.save(null,b),a},parse:function(a){return a},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(a,b){if(a instanceof m)return a;b=b?c.clone(b):{},b.collection=this;var d=new this.model(a,b);return d.validationError?(this.trigger("invalid",this,d.validationError,b),!1):d},_addReference:function(a){this._byId[a.cid]=a,null!=a.id&&(this._byId[a.id]=a),a.collection||(a.collection=this),a.on("all",this._onModelEvent,this)},_removeReference:function(a){this===a.collection&&delete a.collection,a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){("add"!==a&&"remove"!==a||c===this)&&("destroy"===a&&this.remove(b,d),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],null!=b.id&&(this._byId[b.id]=b)),this.trigger.apply(this,arguments))}});var r=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];c.each(r,function(a){o.prototype[a]=function(){var b=g.call(arguments);return b.unshift(this.models),c[a].apply(c,b)}});var s=["groupBy","countBy","sortBy","indexBy"];c.each(s,function(a){o.prototype[a]=function(b,d){var e=c.isFunction(b)?b:function(a){return a.get(b)};return c[a](this.models,e,d)}});var t=b.View=function(a){this.cid=c.uniqueId("view"),a||(a={}),c.extend(this,c.pick(a,v)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},u=/^(\S+)\s*(.*)$/,v=["model","collection","el","id","attributes","className","tagName","events"];c.extend(t.prototype,h,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(a,c){return this.$el&&this.undelegateEvents(),this.$el=a instanceof b.$?a:b.$(a),this.el=this.$el[0],c!==!1&&this.delegateEvents(),this},delegateEvents:function(a){if(!a&&!(a=c.result(this,"events")))return this;this.undelegateEvents();for(var b in a){var d=a[b];if(c.isFunction(d)||(d=this[a[b]]),d){var e=b.match(u),f=e[1],g=e[2];d=c.bind(d,this),f+=".delegateEvents"+this.cid,""===g?this.$el.on(f,d):this.$el.on(f,g,d)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(c.result(this,"el"),!1);else{var a=c.extend({},c.result(this,"attributes"));this.id&&(a.id=c.result(this,"id")),this.className&&(a["class"]=c.result(this,"className"));var d=b.$("<"+c.result(this,"tagName")+">").attr(a);this.setElement(d,!1)}}}),b.sync=function(a,d,e){var f=x[a];c.defaults(e||(e={}),{emulateHTTP:b.emulateHTTP,emulateJSON:b.emulateJSON});var g={type:f,dataType:"json"};if(e.url||(g.url=c.result(d,"url")||K()),null!=e.data||!d||"create"!==a&&"update"!==a&&"patch"!==a||(g.contentType="application/json",g.data=JSON.stringify(e.attrs||d.toJSON(e))),e.emulateJSON&&(g.contentType="application/x-www-form-urlencoded",g.data=g.data?{model:g.data}:{}),e.emulateHTTP&&("PUT"===f||"DELETE"===f||"PATCH"===f)){g.type="POST",e.emulateJSON&&(g.data._method=f);var h=e.beforeSend;e.beforeSend=function(a){return a.setRequestHeader("X-HTTP-Method-Override",f),h?h.apply(this,arguments):void 0}}"GET"===g.type||e.emulateJSON||(g.processData=!1),"PATCH"===g.type&&w&&(g.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var i=e.xhr=b.ajax(c.extend(g,e));return d.trigger("request",d,i,e),i};var w=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),x={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};b.ajax=function(){return b.$.ajax.apply(b.$,arguments)};var y=b.Router=function(a){a||(a={}),a.routes&&(this.routes=a.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},z=/\((.*?)\)/g,A=/(\(\?)?:\w+/g,B=/\*\w+/g,C=/[\-{}\[\]+?.,\\\^$|#\s]/g;c.extend(y.prototype,h,{initialize:function(){},route:function(a,d,e){c.isRegExp(a)||(a=this._routeToRegExp(a)),c.isFunction(d)&&(e=d,d=""),e||(e=this[d]);var f=this;return b.history.route(a,function(c){var g=f._extractParameters(a,c);f.execute(e,g),f.trigger.apply(f,["route:"+d].concat(g)),f.trigger("route",d,g),b.history.trigger("route",f,d,g)}),this},execute:function(a,b){a&&a.apply(this,b)},navigate:function(a,c){return b.history.navigate(a,c),this},_bindRoutes:function(){if(this.routes){this.routes=c.result(this,"routes");for(var a,b=c.keys(this.routes);null!=(a=b.pop());)this.route(a,this.routes[a])}},_routeToRegExp:function(a){return a=a.replace(C,"\\$&").replace(z,"(?:$1)?").replace(A,function(a,b){return b?a:"([^/?]+)"}).replace(B,"([^?]*?)"),new RegExp("^"+a+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(a,b){var d=a.exec(b).slice(1);return c.map(d,function(a,b){return b===d.length-1?a||null:a?decodeURIComponent(a):null})}});var D=b.History=function(){this.handlers=[],c.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},E=/^[#\/]|\s+$/g,F=/^\/+|\/+$/g,G=/msie [\w.]+/,H=/\/$/,I=/#.*$/;D.started=!1,c.extend(D.prototype,h,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(a){var b=(a||this).location.href.match(/#(.*)$/);return b?b[1]:""},getFragment:function(a,b){if(null==a)if(this._hasPushState||!this._wantsHashChange||b){a=decodeURI(this.location.pathname+this.location.search);var c=this.root.replace(H,"");a.indexOf(c)||(a=a.slice(c.length))}else a=this.getHash();return a.replace(E,"")},start:function(a){if(D.started)throw new Error("Backbone.history has already been started");D.started=!0,this.options=c.extend({root:"/"},this.options,a),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var d=this.getFragment(),e=document.documentMode,f=G.exec(navigator.userAgent.toLowerCase())&&(!e||7>=e);if(this.root=("/"+this.root+"/").replace(F,"/"),f&&this._wantsHashChange){var g=b.$('<iframe src="javascript:0" tabindex="-1">');
this.iframe=g.hide().appendTo("body")[0].contentWindow,this.navigate(d)}this._hasPushState?b.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!f?b.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=d;var h=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&h.hash&&(this.fragment=this.getHash().replace(E,""),this.history.replaceState({},document.title,this.root+this.fragment))}return this.options.silent?void 0:this.loadUrl()},stop:function(){b.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),D.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(){var a=this.getFragment();return a===this.fragment&&this.iframe&&(a=this.getFragment(this.getHash(this.iframe))),a===this.fragment?!1:(this.iframe&&this.navigate(a),void this.loadUrl())},loadUrl:function(a){return a=this.fragment=this.getFragment(a),c.any(this.handlers,function(b){return b.route.test(a)?(b.callback(a),!0):void 0})},navigate:function(a,b){if(!D.started)return!1;b&&b!==!0||(b={trigger:!!b});var c=this.root+(a=this.getFragment(a||""));if(a=a.replace(I,""),this.fragment!==a){if(this.fragment=a,""===a&&"/"!==c&&(c=c.slice(0,-1)),this._hasPushState)this.history[b.replace?"replaceState":"pushState"]({},document.title,c);else{if(!this._wantsHashChange)return this.location.assign(c);this._updateHash(this.location,a,b.replace),this.iframe&&a!==this.getFragment(this.getHash(this.iframe))&&(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,a,b.replace))}return b.trigger?this.loadUrl(a):void 0}},_updateHash:function(a,b,c){if(c){var d=a.href.replace(/(javascript:|#).*$/,"");a.replace(d+"#"+b)}else a.hash="#"+b}}),b.history=new D;var J=function(a,b){var d,e=this;d=a&&c.has(a,"constructor")?a.constructor:function(){return e.apply(this,arguments)},c.extend(d,e,b);var f=function(){this.constructor=d};return f.prototype=e.prototype,d.prototype=new f,a&&c.extend(d.prototype,a),d.__super__=e.prototype,d};m.extend=o.extend=y.extend=t.extend=D.extend=J;var K=function(){throw new Error('A "url" property or function must be specified')},L=function(a,b){var c=b.error;b.error=function(d){c&&c(a,d,b),a.trigger("error",a,d,b)}};return b}),function(a){"use strict";a.loadAPI(1)}(this),function(a,b,c,d){"use strict";var e=c.Model.extend({initialize:function(a,c){var d=b.createApplication();this.initApplication(a,c,d),this.api=d,this.initialized=!0},initApplication:function(a,b,c){var e=this;d.defaults(b,{selectedModeMaxChars:12,selectedModeFallback:""}),c.addHasActiveEngineObserver(function(a){e.set("hasActiveEngine",a,{observed:!0})}),this.on("change:hasActiveEngine",function(a,b,c){c.observed||this.initialized&&(b?this.deactivateEngine():this.activateEngine())}),c.addSelectedModeObserver(function(a){e.set("selectedMode",a,{observed:!0})},b.selectedModeMaxChars,b.selectedModeFallback)},activateEngine:function(){this.api.activateEngine()},arrowKeyDown:function(){this.api.arrowKeyDown()},arrowKeyLeft:function(){this.api.arrowKeyLeft()},arrowKeyRight:function(){this.api.arrowKeyRight()},arrowKeyUp:function(){this.api.arrowKeyUp()},copy:function(){this.api.copy()},cut:function(){this.api.cut()},deactivateEngine:function(){this.api.deactivateEngine()},"delete":function(){this.api["delete"]()},duplicate:function(){this.api.duplicate()},enter:function(){this.api.enter()},escape:function(){this.api.escape()},focusPanelAbove:function(){this.api.focusPanelAbove()},focusPanelBelow:function(){this.api.focusPanelBelow()},focusPanelToLeft:function(){this.api.focusPanelToLeft()},focusPanelToRight:function(){this.api.focusPanelToRight()},nextPerspective:function(){this.api.nextPerspective()},paste:function(){this.api.paste()},previousPerspective:function(){this.api.previousPerspective()},redo:function(){this.api.redo()},rename:function(){this.api.rename()},selectAll:function(){this.api.selectAll()},selectNone:function(){this.api.selectNone()},setPerspective:function(a){this.api.setPerspective(a)},toggleAutomationEditor:function(){this.api.toggleAutomationEditor()},toggleBrowserVisibility:function(){this.api.toggleBrowserVisibility()},toggleDevices:function(){this.api.toggleDevices()},toggleFullScreen:function(){this.api.toggleFullScreen()},toggleMixer:function(){this.api.toggleMixer()},toggleNoteEditor:function(){this.api.toggleNoteEditor()},undo:function(){this.api.undo()},zoomIn:function(){this.api.zoomIn()},zoomOut:function(){this.api.zoomOut()},zoomToFit:function(){this.api.zoomToFit()},zoomToSelection:function(){this.api.zoomToSelection()}},{create:function(a){return new e(a)}});a.bitbone||(a.bitbone={}),a.bitbone.Application=e}(this,host,Backbone,_),function(a,b,c,d){"use strict";var e=c.Model.extend({initialize:function(a,c){d.defaults(c,{screenIndex:0});var e=b.createArranger(c.screenIndex);this.initArranger(a,c,e),this.api=e,this.initialized=!0},initArranger:function(a,b,c){var d=this;c.addCueMarkerVisibilityObserver(function(a){d.set("cueMarkerVisibility",a,{observed:!0})}),this.on("change:cueMarkerVisibility",function(a,b,c){c.observed||this.initialized&&this.toggleCueMarkerVisibility()}),c.addPlaybackFollowObserver(function(a){d.set("playbackFollow",a,{observed:!0})}),this.on("change:playbackFollow",function(a,b,c){c.observed||this.initialized&&this.togglePlaybackFollow()}),c.addTrackRowHeightObserver(function(a){d.set("trackRowHeight",a,{observed:!0})}),this.on("change:trackRowHeight",function(a,b,c){c.observed||this.initialized&&this.toggleTrackRowHeight()})},toggleCueMarkerVisibility:function(){this.api.toggleCueMarkerVisibility()},togglePlaybackFollow:function(){this.api.togglePlaybackFollow()},toggleTrackRowHeight:function(){this.api.toggleTrackRowHeight()}},{create:function(a){return new e(a)}});a.bitbone||(a.bitbone={}),a.bitbone.Arranger=e}(this,host,Backbone,_),function(a,b,c,d){"use strict";var e=c.Model.extend({initialize:function(a,b,c){this.initBooleanValue(a,b,c),this.api=c,this.initialized=!0},initRangedValue:function(a,b,c){d.defaults(b,{range:128});var e=this;this.range=b.range,c.addValueObserver(this.range,function(a){e.set("value",a,{observed:!0})}),this.on("change:value",function(a,b,e){e.observed||this.initialized&&c.set(b,d.isNumber(e.range)?e.range:this.range)})},inc:function(a,b){var c=d.isNumber(b)?b:this.range;this.api.inc(a,c)}},{create:function(a,b){return new e(null,b,a)}}),f=c.Collection.extend({model:e});a.bitbone||(a.bitbone={}),a.bitbone.RangedValue=e,a.bitbone.RangedValueCollection=f}(this,host,Backbone,_),function(a,b,c,d){"use strict";var e=a.bitbone.RangedValue,f=e.extend({initialize:function(a,b,c){this.initAutomatableRangedValue(a,b,c),this.api=c,this.initialized=!0},initAutomatableRangedValue:function(a,b,c){var e=this;this.initRangedValue(a,b,c),d.defaults(b,{nameMaxChars:12,nameFallback:"",textMaxChars:12,textFallback:""}),c.addNameObserver(b.nameMaxChars,b.nameFallback,function(a){e.set("name",a,{observed:!0})}),c.addValueDisplayObserver(b.textMaxChars,b.textFallback,function(a){e.set("text",a,{observed:!0})})},reset:function(){this.api.reset()},setIndication:function(a){this.api.setIndication(a)},setLabel:function(a){this.api.setLabel(a)},touch:function(a){this.api.touch(a)}},{create:function(a,b){return new f(void 0,b,a)}}),g=c.Collection.extend({model:f});a.bitbone||(a.bitbone={}),a.bitbone.AutomatableRangedValue=f,a.bitbone.AutomatableRangedValueCollection=g}(this,host,Backbone,_),function(a,b,c,d){"use strict";var e=a.bitbone.RangedValue,f=e.extend({initialize:function(a,b,c){this.initBeatTime(a,b,c),this.api=c,this.initialized=!0},initBeatTime:function(a,b,c){var e=this;this.initRangedValue(a,b,c),d.defaults(b,{separator:".",barsLen:1,beatsLen:1,subdivisionLen:1,ticksLen:0}),c.addRawValueObserver(function(a){e.set("rawValue",a,{observed:!0})}),this.on("change:rawValue",function(a,b,c){c.observed||this.initialized&&this.api.setRaw(b)}),c.addTimeObserver(b.separator,b.barsLen,b.beatsLen,b.subdivisionLen,b.ticksLen,function(a){e.set("text",a,{observed:!0})})},incRaw:function(a){this.api.incRaw(a)}},{create:function(a,b){return new f(null,b,a)}});a.bitbone||(a.bitbone={}),a.bitbone.BeatTime=f}(this,host,Backbone,_),function(a,b,c){"use strict";var d=c.Model.extend({initialize:function(a,b,c){this.initBooleanValue(a,b,c),this.api=c,this.initialized=!0},initBooleanValue:function(a,b,c){var d=this;c.addValueObserver(function(a){d.set("value",a,{observed:!0})}),this.on("change:value",function(a,b,c){c.observed||this.initialized&&this.api.set(b)})},toggle:function(){this.api.toggle()}},{create:function(a,b){return new d(null,b,a)}}),e=c.Collection.extend({model:d});a.bitbone||(a.bitbone={}),a.bitbone.BooleanValue=d,a.bitbone.BooleanValueCollection=e}(this,host,Backbone,_),function(a,b,c,d){"use strict";var e=a.bitbone.BooleanValue,f=a.bitbone.AutomatableRangedValue,g=a.bitbone.AutomatableRangedValueCollection,h=c.Model.extend({initialize:function(a,b,c){this.initChannel(a,b,c),this.api=c,this.initialized=!0},initChannel:function(a,b,c){var h,i=this;d.defaults(b,{useNoteEvent:!1,useVuMeter:!1,numSends:8,nameMaxChars:12,nameFallback:"",vuMeterRamge:127}),c.addColorObserver(function(a,b,c){i.set("color",{R:a,G:b,B:c},{observed:!0})}),c.addIsSelectedObserver(function(a){i.set("selected",a,{observed:!0})}),c.addNameObserver(b.nameMaxChars,b.nameFallback,function(a){i.set("name",a,{observed:!0})}),b.useNoteEvent&&c.addNoteObserver(function(a,b,c){i.trigger("note",a,b,c)}),b.useVuMeter&&(c.addVuMeterObserver(b.vuMeterRange,0,!0,function(a){i.set("vuMeterLeft",a,{observed:!0})}),c.addVuMeterObserver(b.vuMeterRange,1,!0,function(a){i.set("vuMeterRight",a,{observed:!0})})),this.set("exists",e.create(c.exists())),this.set("mute",e.create(c.getMute())),this.set("pan",f.create(c.getPan(),b.pan));var j=new g;for(h=0;h<b.numSends;h++)j.add(f.create(c.getSend(h),b.send));this.set("sends",j),this.set("solo",e.create(c.getSolo())),this.set("volume",f.create(c.getVolume(),b.volume))},select:function(){this.api.select()}},{create:function(a,b){return new h(void 0,b,a)}}),i=c.Collection.extend({model:h});a.bitbone||(a.bitbone={}),a.bitbone.Channel=h,a.bitbone.ChannelCollection=i}(this,host,Backbone,_),function(a,b,c){"use strict";var d=c.Model.extend({idAttribute:"slot",initialize:function(a,b){this.initClipLauncherScenesOrSlot(a,b),this.api=b.api,this.initialized=!0},initClipLauncherScenesOrSlot:function(){},launch:function(){this.api.launch(this.get("slot"))}}),e=c.Collection.extend({model:d,initialize:function(a,b,c){this.initClipLauncherScenesOrSlots(a,b,c),this.api=c,this.initialized=!0},initClipLauncherScenesOrSlots:function(a,b,c){var d=this;c.addNameObserver(function(a,b){d.add({slot:a,name:b},{observed:!0,merge:!0,api:c})})},returnToArrangement:function(){this.api.returnToArrangement()},stop:function(){this.api.stop()}},{create:function(a,b){return new e(void 0,b,a)}});a.bitbone||(a.bitbone={}),a.bitbone.ClipLauncherScenesOrSlot=d,a.bitbone.ClipLauncherScenesOrSlots=e}(this,host,Backbone,_),function(a){"use strict";var b=a.bitbone.ClipLauncherScenesOrSlot,c=a.bitbone.ClipLauncherScenesOrSlots,d=b.extend({initialize:function(a,b){this.initClipLauncherScenesOrSlot(a,b),this.api=b.api,this.initialized=!0},initClipLauncherSlot:function(a,b){this.initClipLauncherScenesOrSlot(a,b)},record:function(){this.api.record(this.get("slot"))},select:function(){this.api.select(this.get("slot"))},showInEditor:function(){this.api.showInEditor(this.get("slot"))}}),e=c.extend({model:d,initialize:function(a,b,c){this.initClipLauncherSlots(a,b,c),this.api=c,this.initialized=!0},initClipLauncherSlots:function(a,b,c){var d=this;this.initClipLauncherScenesOrSlots(a,b,c),c.addColorObserver(function(a,b,e,f){d.add({slot:a,color:{R:b,G:e,B:f}},{observed:!0,merge:!0,api:c})}),c.addHasContentObserver(function(a,b){d.add({slot:a,hasContent:b},{observed:!0,merge:!0,api:c})}),c.addIsPlayingObserver(function(a,b){d.add({slot:a,playing:b},{observed:!0,merge:!0,api:c})}),c.addIsQueuedObserver(function(a,b){d.add({slot:a,queued:b},{observed:!0,merge:!0,api:c})}),c.addIsRecordingObserver(function(a,b){d.add({slot:a,recording:b},{observed:!0,merge:!0,api:c})}),c.addIsSelectedObserver(function(a,b){d.add({slot:a,selected:b},{observed:!0,merge:!0,api:c})})},createEmptyClip:function(a,b){this.api.createEmptyClip(a,b)},setIndication:function(a){this.api.setIndication(a)}},{create:function(a,b){return new e(void 0,b,a)}});a.bitbone||(a.bitbone={}),a.bitbone.ClipLauncherSlot=d,a.bitbone.ClipLauncherSlots=e}(this,host,Backbone,_),function(a,b,c,d){"use strict";var e=a.bitbone.RangedValue,f=a.bitbone.BooleanValue,g=c.Model.extend({initialize:function(a,c){d.defaults(c,{gridWidth:128,gridHeight:128});var e=b.createCursorClip(c.gridWidth,c.gridHeight);this.initClip(a,c,e),this.api=e,this.initialized=!0},initClip:function(a,b,c){var d=this;c.addCanScrollKeysDownObserver(function(a){d.set("canScrollKeysDown",a,{observed:!0})}),c.addCanScrollKeysUpObserver(function(a){d.set("canScrollKeysUp",a,{observed:!0})}),c.addCanScrollStepsForwardObserver(function(a){d.set("canScrollStepsForward",a,{observed:!0})}),c.addPlayingStepObserver(function(a){d.set("playingStep",a,{observed:!0})}),c.addStepDataObserver(function(){}),this.set("shuffle",f.create(c.getShuffle())),this.set("accent",e.create(c.getAccent(),b.accent))},clearStep:function(a,b){this.api.clearStep(a,b)},scrollKeysPageDown:function(){this.api.scrollKeysPageDown()},scrollKeysPageUp:function(){this.api.scrollKeysPageUp()},scrollKeysStepDown:function(){this.api.scrollKeysStepDown()},scrollKeysStepUp:function(){this.api.scrollKeysStepUp()},scrollStepsStepBackwards:function(){this.api.scrollStepsStepBackwards()},scrollStepsStepForward:function(){this.api.scrollStepsStepForward()},scrollToKey:function(a){this.api.scrollToKey(a)},scrollToStep:function(a){this.api.scrollToStep(a)},selectStepContents:function(a,b,c){this.api.scrollToStep(a,b,c)},setName:function(a){this.api.setName(a)},setStep:function(a,b,c){this.api.setStep(a,b,c)},setStepSize:function(a){this.api.setStepSize(a)},toggleStep:function(a,b,c){this.api.setStep(a,b,c)}},{create:function(a){return new g(a)}});a.bitbone||(a.bitbone={}),a.bitbone.Clip=g}(this,host,Backbone,_),function(a,b,c,d){"use strict";var e=c.Model.extend({initialize:function(a,b,c){this.initModulationSource(a,b,c),this.api=c,this.initialized=!0},initModulationSource:function(a,b,c){var e=this;d.defaults(b,{nameMaxChars:12,nameFallback:""}),c.addIsMappingObserver(function(a){e.set("mapping",a,{observed:!0})}),this.on("change:mapping",function(a,b,c){c.observed||this.initialized&&this.api.toggleMapping()}),c.addNameObserver(b.nameMaxChars,b.nameFallback,function(a){e.set("name",a,{observed:!0})})},toggleMapping:function(){this.api.toggleMapping()}},{create:function(a,b){return new e(null,b,a)}}),f=c.Collection.extend({model:e});a.bitbone||(a.bitbone={}),a.bitbone.ModulationSource=e,a.bitbone.ModulationSourceCollection=f}(this,host,Backbone,_),function(a,b,c,d){"use strict";var e=a.bitbone.AutomatableRangedValue,f=a.bitbone.ModulationSource,g=c.Model.extend({initialize:function(a,b,c){this.initMacro(a,b,c),this.api=c,this.initialized=!0},initMacro:function(a,b,c){d.defaults(b,{labelMaxChars:12,labelFallback:""});var g=this;c.addLabelObserver(b.labelMaxChars,b.labelFallback,function(a){g.set("label",a,{observed:!0})}),this.set("amount",e.create(c.getAmount(),b.amount)),this.set("modulationSource",f.create(c.getModulationSource(),b.modulationSource))}},{create:function(a,b){return new g(null,b,a)}}),h=c.Collection.extend({model:g});a.bitbone||(a.bitbone={}),a.bitbone.Macro=g,a.bitbone.MacroCollection=h}(this,host,Backbone,_),function(a,b,c,d){"use strict";var e=a.bitbone.AutomatableRangedValue,f=a.bitbone.AutomatableRangedValueCollection,g=a.bitbone.Macro,h=a.bitbone.MacroCollection,i=a.bitbone.ModulationSource,j=a.bitbone.ModulationSourceCollection,k=c.Model.extend({initialize:function(a,b,c){this.initDevice(a,b,c),this.api=c,this.initialized=!0},initDevice:function(a,b,c){d.defaults(b,{modulationSourceMaxChars:12,modulationSourceFallback:"",nameMaxChars:12,nameFallback:"",presetCategoryMaxChars:12,presetCategoryFallback:"",presetCreatorMaxChars:12,presetCreatorFallback:""});var k,l,m=this;for(c.addActiveModulationSourceObserver(b.modulationSourceMaxChars,b.modulationSourceFallback,function(a){m.set("activeModulationSource",a,{observed:!0})}),c.addHasSelectedDeviceObserver(function(a){m.set("hasSelectedDevice",a,{observed:!0})}),c.addIsEnabledObserver(function(a){m.set("enabled",a,{observed:!0})}),c.addNameObserver(b.nameMaxChars,b.nameFallback,function(a){m.set("name",a,{observed:!0})}),c.addNextParameterPageEnabledObserver(function(a){m.set("nextParameterPageEnabled",a,{observed:!0})}),c.addPreviousParameterPageEnabledObserver(function(a){m.set("previousParameterPageEnabled",a,{observed:!0})}),c.addPageNamesObserver(function(){m.set("pageNames",arguments,{observed:!0})}),c.addSelectedPageObserver(-1,function(a){m.set("selectedPage",a,{observed:!0})}),c.addPresetCategoriesObserver(function(){m.set("presetCategories",arguments,{observed:!0})}),c.addPresetCategoryObserver(b.presetCategoryMaxChars,b.presetCategoryFallback,function(a){m.set("presetCategory",a,{observed:!0})}),c.addPresetCreatorsObserver(function(){m.set("presetCreators",arguments,{observed:!0})}),c.addPresetCreatorObserver(b.presetCreatorMaxChars,b.presetCreatorFallback,function(a){m.set("presetCreator",a,{observed:!0})}),l=new f,k=0;8>k;k++)l.add(e.create(c.getCommonParameter(k)));for(this.set("commonParameters",l),l=new f,k=0;8>k;k++)l.add(e.create(c.getEnvelopeParameter(k)));for(this.set("envelopeParameters",l),l=new h,k=0;8>k;k++)l.add(g.create(c.getMacro(k)));for(this.set("macros",l),l=new j,k=0;8>k;k++)l.add(i.create(c.getModulationSource(k)));for(this.set("modulationSources",l),l=new f,k=0;8>k;k++)l.add(e.create(c.getParameter(k)));this.set("parameters",l)},mextParameterPage:function(){this.api.nextParamaterPage()},previousParameterPage:function(){this.api.previousParameterPage()},setParameterPage:function(a){this.api.setParameterPage(a)},setPresetCategory:function(a){this.api.setPresetCategory(a)},setPresetCreator:function(a){this.api.setPresetCreator(a)},switchToNextPreset:function(a){this.api.switchToNextPreset(a)},switchToPreviousPreset:function(a){this.api.switchToPreviousPreset(a)},switchToNextPresetCategory:function(a){this.api.switchToNextPresetCategory(a)},switchToPreviousPresetCategory:function(a){this.api.switchToPreviousPresetCategory(a)},switchToNextPresetCreator:function(a){this.api.switchToNextPresetCreator(a)},switchToPreviousPresetCreator:function(a){this.api.switchToPreviousPresetCreator(a)},toggleEnableState:function(a){this.api.toggleEnableState(a)}},{create:function(a,b){return new k(void 0,b,a)}});a.bitbone||(a.bitbone={}),a.bitbone.Device=k}(this,host,Backbone,_),function(a,b){"use strict";var c=a.bitbone.Device,d=c.extend({initialize:function(a,c){var d=b.createCursorDevice();this.initCursorDevice(a,c,d),this.api=d,this.initialized=!0},initCursorDevice:function(a,b,c){var d=this;this.initDevice(a,b,c),c.addCanSelectNextObserver(function(a){d.set("canSelectNext",a,{observed:!0})}),c.addCanSelectPreviousObserver(function(a){d.set("canSelectPrevious",a,{observed:!0})})},selectNext:function(){this.api.selectNext()},selectPrevious:function(){this.api.selectPrevious()}},{create:function(a){return new d(a)}});a.bitbone||(a.bitbone={}),a.bitbone.CursorDevice=d}(this,host,Backbone,_),function(a,b,c){"use strict";var d=a.bitbone.BooleanValue,e=c.Model.extend({initialize:function(a,b,c){this.initSourceSelector(a,b,c),this.api=c,this.initialized=!0},initSourceSelector:function(a,b,c){this.set("hasAudioInputSelected",d.create(c.getHasAudioInputSelected())),this.set("hasNoteInputSelected",d.create(c.getHasNoteInputSelected()))}},{create:function(a,b){return new e(void 0,b,a)}});a.bitbone||(a.bitbone={}),a.bitbone.SourceSelector=e}(this,host,Backbone,_),function(a,b,c,d){"use strict";var e=a.bitbone.Channel,f=a.bitbone.BooleanValue,g=a.bitbone.ClipLauncherSlots,h=a.bitbone.Device,i=a.bitbone.SourceSelector,j=e.extend({initialize:function(a,b,c){this.initTrack(a,b,c),this.api=c,this.initialized=!0},initTrack:function(a,b,e){var j=this;d.defaults(b,{usePitchName:!1,trackTypeMaxChars:12,trackTypeFallbacks:""}),this.initChannel(a,b,e),this.on("change:name",function(a,b,c){c.observed||this.initialized&&this.api.setName(b)}),b.usePitchNames&&(this.set("pitchNames",new c.Collection),e.addPitchNamesObserver(function(a,b){j.add({id:a,name:b})})),e.addTrackTypeObserver(b.trackTypeMaxChars,b.trackTypeFallback,function(a){j.set("trackType",a)}),this.set("arm",f.create(e.getArm(),b.arm)),this.set("canHoldAudioData",f.create(e.getCanHoldAudioData(),b.canHoldAudioData)),this.set("canHoldNoteData",f.create(e.getCanHoldNoteData(),b.canHoldNoteData)),this.set("clipLauncherSlots",g.create(e.getClipLauncherSlots(),b.clipLauncherSlots)),this.set("matrixQueuedForStop",f.create(e.getIsMatrixQueuedForStop(),b.matrixQueuedForStop)),this.set("matrixStoped",f.create(e.getIsMatrixStopped(),b.matrixStoped)),this.set("primaryDevice",h.create(e.getPrimaryDevice(),b.primaryDevice)),this.set("sourceSelector",i.create(e.getSourceSelector(),b.sourceSelector))},playNote:function(a,b){this.api.playNote(a,b)},returnToArrangement:function(){this.api.returnToArrangement()},startNote:function(a,b){this.api.startNote(a,b)},stop:function(){this.api.stop()},stopNote:function(a,b){this.api.stopNote(a,b)}},{create:function(a,b){return new j(void 0,b,a)}}),k=c.Collection.extend({model:j});a.bitbone||(a.bitbone={}),a.bitbone.Track=j,a.bitbone.TrackCollection=k}(this,host,Backbone,_),function(a,b,c,d){"use strict";var e=a.bitbone.Track,f=e.extend({initialize:function(a,c){d.defaults(c,{numSends:8,numScenes:8});var e=b.createCursorTrack(c.numSends,c.numScenes);this.initCursorTrack(a,c,e),this.api=e,this.initialized=!0},initCursorTrack:function(a,b,c){this.initTrack(a,b,c)},selectNext:function(){this.api.selectNext()},selectPrevious:function(){this.api.selectPrevious()}},{create:function(a){return new f(void 0,a)}});a.bitbone||(a.bitbone={}),a.bitbone.CursorTrack=f}(this,host,Backbone,_),function(a,b,c){"use strict";var d=a.bitbone.AutomatableRangedValue,e=c.Model.extend({initialize:function(a,c){var d=b.createGroove();this.initGroove(a,c,d),this.api=d,this.initialized=!0},initGroove:function(a,b,c){this.set("accentAmount",d.create(c.getAccentAmount(),b.accentAmount)),this.set("accentRate",d.create(c.getAccentRate(),b.accentRate)),this.set("accentPhase",d.create(c.getAccentPhase(),b.accentPhase)),this.set("shuffleAmount",d.create(c.getShuffleAmount(),b.shuffleAmount)),this.set("shuffleRate",d.create(c.getShuffleRate(),b.shuffleRate)),this.set("enabled",d.create(c.getEnabled()))}},{create:function(a){return new e(null,a)}});a.bitbone||(a.bitbone={}),a.bitbone.Groove=e}(this,host,Backbone,_),function(a,b,c,d){"use strict";var e=c.Model.extend({initialize:function(a,c){d.defaults(c,{perspective:"",screenIndex:0});var e=b.createMixer(c.perspective,c.screenIndex);this.initMixer(a,c,e),this.api=e,this.initialized=!0},initMixer:function(a,b,c){var d=this;c.addClipLauncherSectionVisibilityObserver(function(a){d.set("clipLauncherSectionVisibility",a,{observed:!0})}),this.on("change:clipLauncherSectionVisibility",function(a,b,c){c.observed||this.initialized&&this.toggleClipLauncherSectionVisibility()}),c.addCrossFadeSectionVisibilityObserver(function(a){d.set("crossFadeSectionVisibility",a,{observed:!0})}),this.on("change:crossFadeSectionVisibility",function(a,b,c){c.observed||this.initialized&&this.toggleCrossFadeSectionVisibility()}),c.addDeviceSectionVisibilityObserver(function(a){d.set("deviceSectionVisibility",a,{observed:!0})}),this.on("change:deviceSectionVisibility",function(a,b,c){c.observed||this.initialized&&this.toggleDeviceSectionVisibility()}),c.addIoSectionVisibilityObserver(function(a){d.set("ioSectionVisibility",a,{observed:!0})}),this.on("change:ioSectionVisibility",function(a,b,c){c.observed||this.initialized&&this.toggleIoSectionVisibility()}),c.addMeterSectionVisibilityObserver(function(a){d.set("meterSectionVisibility",a,{observed:!0})}),this.on("change:meterSectionVisibility",function(a,b,c){c.observed||this.initialized&&this.toggleMeterSectionVisibility()}),c.addSendsSectionVisibilityObserver(function(a){d.set("sendsSectionVisibility",a,{observed:!0})}),this.on("change:sendsSectionVisibility",function(a,b,c){c.observed||this.initialized&&this.toggleSendsSectionVisibility()})},toggleClipLauncherSectionVisibility:function(){this.api.toggleClipLauncherSectionVisibility()},toggleCrossFadeSectionVisibility:function(){this.api.toggleCrossFadeSectionVisibility()},toggleDeviceSectionVisibility:function(){this.api.toggleDeviceSectionVisibility()},toggleIoSectionVisibility:function(){this.api.toggleIoSectionVisibility()},toggleMeterSectionVisibility:function(){this.api.toggleMeterSectionVisibility()},toggleSendsSectionVisibility:function(){this.api.toggleSendsSectionVisibility()}},{create:function(a){return new e(void 0,a)}});a.bitbone||(a.bitbone={}),a.bitbone.Mixier=e}(this,host,Backbone,_),function(a){"use strict";{var b=a.bitbone.Device,c=a.ChainLocation,d=a.DeviceType;b.extend({initialize:function(a,b,c){this.initPrimaryDevice(a,b,c),this.api=c,this.initialized=!0},initPrimaryDevice:function(a,b,e){var f=this;this.initDevice(a,b,e),e.addCanSwitchToDeviceObserver(d.ANY,c.FIRST,function(a){f.set("canSwithcToFirst",a,{observed:!0})}),e.addCanSwitchToDeviceObserver(d.ANY,c.LAST,function(a){f.set("canSwithcToLast",a,{observed:!0})}),e.addCanSwitchToDeviceObserver(d.ANY,c.LAST,function(a){f.set("canSwithcToNext",a,{observed:!0})}),e.addCanSwitchToDeviceObserver(d.ANY,c.PREVIOUS,function(a){f.set("canSwithcToPrevious",a,{observed:!0})})},switchToDeviceFirst:function(){this.api.switchToDevice(d.ANY,c.FISRT)},switchToDeviceLast:function(){this.api.switchToDevice(d.ANY,c.LAST)},switchToDeviceNext:function(){this.api.switchToDevice(d.ANY,c.NEXT)},switchToDevicePrevious:function(){this.api.switchToDevice(d.ANY,c.Previous)}},{create:function(a,c){return new b(void 0,c,a)}})}a.bitbone||(a.bitbone={}),a.bitbone.Device=b}(this,host,Backbone,_),function(a,b,c,d){"use strict";var e=a.bitbone.Track,f=a.bitbone.TrackCollection,g=a.bitbone.ClipLauncherScenesOrSlots,h=c.Model.extend({model:e,initialize:function(a,c){d.defaults(c,{main:!1,numTracks:8,numSends:8,numScenes:8,trackScrollStepSize:1});var e=c.main?b.createMainTrackBank(c.numTracks,c.numSends,c.numScenes):b.createTrackBank(c.numTracks,c.numSends,c.numScenes);this.initTrackBank(a,c,e),this.api=e,this.initialized=!0},initTrackBank:function(a,b,c){var d=this;c.addCanScrollScenesDownObserver(function(a){d.set("canScrollScenesDown",a,{observed:!0})}),c.addCanScrollScenesUpObserver(function(a){d.set("canScrollScenesUp",a,{observed:!0})}),c.addCanScrollSendsDownObserver(function(a){d.set("canScrollSendsDown",a,{observed:!0})}),c.addCanScrollSendsUpObserver(function(a){d.set("canScrollSendsUp",a,{observed:!0})}),c.addCanScrollTracksDownObserver(function(a){d.set("canScrollTracksDown",a,{observed:!0})}),c.addCanScrollTracksUpObserver(function(a){d.set("canScrollTracksUp",a,{observed:!0})}),c.addSceneScrollPositionObserver(function(a){d.set("sceneScrollPosition",a,{observed:!0})},-1),c.addTrackScrollPositionObserver(function(a){d.set("trackScrollPosition",a,{observed:!0})},-1),c.setTrackScrollStepSize(b.trackScrollStepSize),this.set("trackScrollStepSize",b.trackScrollStepSize),this.on("change:trackScrollStepSize",function(a,b,c){c.observed||this.initialized&&this.api.setTrackScrollStepSize(b)}),this.set("clipLauncherScenes",g.create(c.getClipLauncherScenes(),b.clipLauncherScenes));for(var h=new f,i=0;i<b.numTracks;i++)h.add(e.create(c.getTrack(i),b.track));this.set("tracks",h)},launchScenes:function(a){this.api.lacunhScenes(a)},scrollScenesDown:function(){this.api.scrollScenesDown()},scrollScenesPageDown:function(){this.api.scrollScenesPageDown()},scrollScenesPageUp:function(){this.api.scrollScenesPageUp()},scrollScenesUp:function(){this.api.scrollScenesUp()},scrollSendsDown:function(){this.api.scrollSendsDown()},scrollSendsPageDown:function(){this.api.scrollSendsPageDown()},scrollSendsPageUp:function(){this.api.scrollSendsPageUp()},scrollSendsUp:function(){this.api.scrollSendsUp()},scrollToScene:function(a){this.api.scrollToScene(a)},scrollToTrack:function(a){this.api.scrollToTrack(a)},scrollTracksDown:function(){this.api.scrollTracksDown()},scrollTracksPageDown:function(){this.api.scrollTracksPageDown()},scrollTracksPageUp:function(){this.api.scrollTracksPageUp()},scrollTracksUp:function(){this.api.scrollTracksUp()}},{create:function(a){return new h(void 0,a)}});a.bitbone||(a.bitbone={}),a.bitbone.TrackBank=h}(this,host,Backbone,_),function(a,b,c,d){"use strict";var e=a.bitbone.BeatTime,f=a.bitbone.RangedValue,g=c.Model.extend({initialize:function(a,c){var d=b.createTransport();this.initTransport(a,c,d),this.api=d,this.initialized=!0},initTransport:function(a,b,c){var g=this;d.defaults(b,{tempo:{range:666}}),c.addAutomationOverrideObserver(function(a){g.set("automationOverride",a)}),c.addAutomationWriteModeObserver(function(a){g.set("automationWriteMode",a,{observed:!0})}),this.on("change:automationWriteMode",function(a,b,d){d.observed||this.initialized&&c.setAutomationWriteMode(b)}),c.addClickObserver(function(a){g.set("click",a,{observed:!0})}),this.on("change:click",function(a,b,c){c.observed||this.initialized&&this.api.setClick(b)}),c.addIsLoopActiveObserver(function(a){g.set("loopActive",a,{observed:!0})}),this.on("change:loopActive",function(a,b,c){c.observed||this.initialized&&this.api.setLoop(b)}),c.addIsPlayingObserver(function(a){g.set("playing",a,{observed:!0})}),this.on("change:playing",function(a,b,c){c.observed||this.initialized&&(b?this.stop():this.play())}),c.addIsRecordingObserver(function(a){g.set("recording",a,{observed:!0})}),this.on("change:recording",function(a,b,c){c.observed||this.initialized&&this.record()}),c.addIsWritingArrangerAutomationObserver(function(a){g.set("writingArrangerAutomation",a,{observed:!0})}),this.on("change:writingArrangerAutomation",function(a,b,c){c.observed||this.initialized&&this.api.toggleWriteArrangerAutomation()}),c.addIsWritingClipLauncherAutomationObserver(function(a){g.set("writingClipLauncherAutomation",a,{observed:!0})}),this.on("change:writingClipLauncherAutomation",function(a,b,c){c.observed||this.initialized&&this.api.toggleWriteClipLauncherAutomation()}),c.addLauncherOverdubObserver(function(a){g.set("launcherOverdub",a,{observed:!0})}),this.on("change:launcherOverdub",function(a,b,c){c.observed||this.initialized&&this.api.setLauncherOverdub(b)}),c.addMetronomeTicksObserver(function(a){g.set("metronomeTicks",a,{observed:!0})}),this.on("change:metronomeTicks",function(a,b,c){c.observed||this.initialized&&this.api.toggleMetronomeTicks()}),c.addMetronomeVolumeObserver(function(a){g.set("metronomeVolume",a,{observed:!0})}),this.on("change:metronomeVolume",function(a,b,c){c.observed||this.initialized&&this.api.setMetronomeValue(b,d.isNumber(c.range)?c.range:128)}),c.addOverdubObserver(function(a){g.set("overdub",a,{observed:!0})}),this.on("change:overdub",function(a,b,c){c.observed||this.initialized&&this.api.setOverdub(b)}),c.addPreRollObserver(function(a){g.set("preRoll",a,{observed:!0})}),c.addPunchInObserver(function(a){g.set("punchIn",a,{observed:!0})}),this.on("change:punchIn",function(a,b,c){c.observed||this.initialized&&this.api.togglePunchIn()}),c.addPunchOutObserver(function(a){g.set("punchOut",a,{observed:!0})}),this.on("change:punchOut",function(a,b,c){c.observed||this.initialized&&this.api.togglePunchOut()
}),this.set("inPosition",e.create(c.getInPosition(),b.inPostion)),this.set("outPosition",e.create(c.getOutPosition(),b.outPosition)),this.set("position",e.create(c.getPosition(),b.position)),this.set("tempo",f.create(c.getTempo(),b.tempo))},fastForward:function(){this.get("playing")?(this.stop(),this.api.fastForward(),this.deferredPlay(50)):this.api.fastForward()},incPosition:function(a,b){this.api.incPosition(a,b)},incTempo:function(a,b){this.api.increaseTempo(a,b?64700:647)},incTempoSlow:function(a){this.incTempo(a,!0)},incTempoFast:function(a){this.incTempo(a,!1)},jumpToInPosition:function(){var a=this.get("inPosition").get("rawValue");this.get("playing")?(this.stop(),this.get("position").setRaw(a),this.deferredPlay(50)):this.get("position").setRaw(a)},jumpToOutPosition:function(){var a=this.get("outPosition").get("rawValue");this.get("playing")?(this.stop(),this.get("position").setRaw(a),this.deferredPlay(50)):this.get("position").setRaw(a)},play:function(){this.api.play()},deferredPlay:function(a){var c=this;b.scheduleTask(function(){c.play()},null,a)},record:function(){this.api.record()},resetAutomationOverrides:function(){this.api.resetAutomationOverrides()},rstart:function(){this.api.restart()},returnToArrangement:function(){this.api.returnToArrangement()},rewind:function(){this.get("playing")?(this.stop(),this.api.rewind(),this.deferredPlay(50)):this.api.rewind()},stop:function(){this.api.stop()},toggleClick:function(){this.api.toggleClick()},toggleLatchAutomationWriteMode:function(){this.api.toggleLatchAutomationWriteMode()},toggleLauncherOverdub:function(){this.api.toggleLauncherOverdub()},toggleLoop:function(){this.api.toggleLoop()},toggleMetronomeTicks:function(){this.api.toggleMetronomeTicks()},toggleOverdub:function(){this.api.toggleOverdub()},togglePlay:function(){this.api.togglePlay()},togglePunchIn:function(){this.api.togglePunchIn()},togglePunchOut:function(){this.api.togglePunchOut()},toggleWriteArrangerAutomation:function(){this.api.toggleWriteArrangerAutomation()},toggleWriteClipLauncherAutomation:function(){this.api.toggleWriteClipLauncherAutomation()}},{create:function(a){return new g(a)}});a.bitbone||(a.bitbone={}),a.bitbone.Transport=g}(this,host,Backbone,_),function(a,b){"use strict";var c=a.bitbone.AutomatableRangedValue,d=a.bitbone.AutomatableRangedValueCollection,e=d.extend({initialize:function(a,c,d){var e=b.createUserControls(d);this.initUserControlBank(a,c,e,d),this.api=e,this.initialized=!0},initUserControlBank:function(a,b,d,e){for(var f=0;e>f;f++)this.add(c.create(d.getControl(f)))}},{create:function(a,b){return new e(void 0,b,a)}});a.bitbone||(a.bitbone={}),a.bitbone.UserControlBank=e}(this,host,Backbone,_),function(a,b,c,d){"use strict";function e(a,b){var c;return d.isString(b)?c=a.findWhere({name:b}):d.isNumber(b)&&b>0&&b<=a.size()&&(c=a.at(b-1)),c}function f(a,b){var c;return d.isString(b)?c=a.find(function(a){return this._compareName(a,b)}):d.isNumber(b)&&b>0&&b<=a.size()&&(c=a.get(b-1)),c}var g=c.Model.extend({applictaion:function(){return this.get("application")},arranger:function(){return this.get("arranger")},transport:function(){return this.get("transport")},groove:function(){return this.get("groove")},track:function(a){var b=e(this.get("trackBank").get("tracks"),a);if(b||(b=e(this.get("effectTrackBank").get("tracks"),a)),!b&&d.isString(a)){var c=this.get("masterTrack");c.get("name")===a&&(b=c)}return b},scene:function(a){var b=this.get("trackBank").get("clipLauncherScenes");return f(b,a)},clip:function(a,b){var c,d=this.track(a),e=d?d.get("clipLauncherSlots"):void 0;return e&&(c=f(e,b)),c},app:function(){return this.application()},arr:function(){return this.arranger()},trp:function(){return this.transport()},grv:function(){return this.groove()},trk:function(a){return this.track(a)},scn:function(a){return this.scene(a)},clp:function(a,b){return this.clip(a,b)},msg:function(a){b.showPopupNotification(a)}},{});a.controller||(a.controller={}),a.controller.ClipletEnvironment=g}(this,host,Backbone,_),function(root,Bitwig,Backbone,_){"use strict";var Application=root.bitbone.Application,Arranger=root.bitbone.Arranger,Groove=root.bitbone.Groove,ClipLauncherSlot=root.bitbone.ClipLauncherSlot,ClipLauncherScenesOrSlots=root.bitbone.ClipLauncherScenesOrSlots,ClipLauncherSceneOrSlot=root.bitbone.ClipLauncherSceneOrSlots,Track=root.bitbone.Track,TrackBank=root.bitbone.TrackBank,Transport=root.bitbone.Transport,ClipletEnvironment=root.controller.ClipletEnvironment,Launchables=Backbone.Collection.extend({model:ClipLauncherSceneOrSlot}),ClipletController=Backbone.Model.extend({initialize:function(a,b){b||(b={}),_.defaults(b,{numTracks:32,numScenes:32,numEffectTracks:2}),this.initClipletController(a,b);var c=this;Bitwig.scheduleTask(function(){c.initialized=!0},null,300)},initClipletController:function(a,b){var c=this;this.launchables=new Launchables,this.trackBank=TrackBank.createMain({numTracks:b.numTracks,numScenes:b.numScenes}),this.effectTrackBank=TrackBank.createEffect({numTracks:b.numEffectTracks,numScenes:b.numScenes}),this.masterTrack=Track.createMaster({numScenes:b.numScenes}),this.clipletEnv=new ClipletEnvironment({application:Application.create(),arranger:Arranger.create(),groove:Groove.create(),transport:Transport.create(),trackBank:this.trackBank,effectTrackBank:this.effectTrackBank,masterTrack:this.masterTrack}),this.trackBank.get("tracks").each(function(a){a.get("clipLauncherSlots").on("change:name",function(b,d){c.onChangeClipName(a,b,d)}).on("change:queued",function(b,d){c.onChangeClipQueued(a,b,d)}).on("change:playing",function(b,d){c.onChangeClipPlaying(a,b,d)}).on("change:recording",function(b,d){c.onChangeClipRecording(a,b,d)}).on("change:selected",function(b,d){c.onChangeClipSelected(a,b,d)})}),this.trackBank.get("clipLauncherScenes").on("change:name",function(a,b){c.onChangeClipName(null,a,b)}),this.effectTrackBank.get("tracks").each(function(a){a.get("clipLauncherSlots").on("change:name",function(b,d){c.onChangeClipName(a,b,d)}).on("change:queued",function(b,d){c.onChangeClipQueued(a,b,d)}).on("change:playing",function(b,d){c.onChangeClipPlaying(a,b,d)}).on("change:recording",function(b,d){c.onChangeClipRecording(a,b,d)}).on("change:selected",function(b,d){c.onChangeClipSelected(a,b,d)})}),this.masterTrack.get("clipLauncherSlots").on("change:name",function(a,b){c.onChangeClipName(this.masterTrack,a,b)}).on("change:queued",function(a,b){c.onChangeClipQueued(this.masterTrack,a,b)}).on("change:playing",function(a,b){c.onChangeClipPlaying(this.masterTrack,a,b)}).on("change:recording",function(a,b){c.onChangeClipRecording(this.masterTrack,a,b)}).on("change:selected",function(a,b){c.onChangeClipSelected(this.masterTrack,a,b)})},onMidi:function(a,b,c){var d=root.isChannelController(a),e=root.isNoteOn(a),f=a&&15;if((d||e)&&c>0){var g=this.launchables.filter(function(a){var c=a.cliplet;return(void 0===c.ch||c.ch===f)&&(d&&b===c.cc||e&&b===c.note)});_.each(g,function(a){a.launch()})}},onFlush:function(){},onExit:function(){},onChangeClipName:function(a,b,c){b.cliplet=this.createCliplet(c);var d=this.launchables.contains(b),e=_.isNumber(b.cliplet.cc)||_.isNumber(b.cliplet.note);d&&!e?this.launchables.remove(b):!d&&e&&this.launchables.add(b)},onChangeClipQueued:function(a,b,c){this.initialized&&c&&_.isObject(b.cliplet)&&_.isFunction(b.cliplet.que)&&b.cliplet.que.call(this.clipletEnv,this.clipletEnv)},onChangeClipPlaying:function(a,b,c){this.initialized&&(c?_.isObject(b.cliplet)&&_.isFunction(b.cliplet.ply)&&b.cliplet.ply.call(this.clipletEnv,this.clipletEnv):_.isObject(b.cliplet)&&_.isFunction(b.cliplet.stp)&&b.cliplet.stp.call(this.clipletEnv,this.clipletEnv))},onChangeClipRecording:function(a,b,c){this.initialized&&c&&_.isObject(b.cliplet)&&_.isFunction(b.cliplet.rec)&&b.cliplet.rec.call(this.clipletEnv,this.clipletEnv)},onChangeClipSelected:function(a,b,c){this.initialized&&c&&_.isObject(b.cliplet)&&_.isFunction(b.cliplet.sel)&&b.cliplet.sel.call(this.clipletEnv,this.clipletEnv)},createCliplet:function(str){var o,cliplet={};try{o=eval("({"+str+"})")}catch(e){}return _.isObject(o)&&(cliplet.name=_.isString(o.name)?o.name:void 0,cliplet.cc=_.isNumber(o.cc)?o.cc:void 0,cliplet.note=_.isNumber(o.note)?o.note:void 0,cliplet.ch=_.isNumber(o.ch)?o.ch:void 0,cliplet.que=_.isFunction(o.que)?o.que:void 0,cliplet.ply=_.isFunction(o.ply)?o.ply:void 0,cliplet.stp=_.isFunction(o.stp)?o.stp:void 0,cliplet.rec=_.isFunction(o.rec)?o.rec:void 0,cliplet.sel=_.isFunction(o.sel)?o.sel:void 0),cliplet}},{create:function(a){return new ClipletController(null,a)}});root.controller||(root.controller={}),root.controller.ClipletController=ClipletController}(this,host,Backbone,_),function(a,b){"use strict";function c(b,c,h){if(e.onMidi(b,c,h),a.isChannelController(b)&&c>=f&&g>=c){var i=c-f;d.getControl(i).set(h,128)}}b.defineMidiPorts(1,0),b.defineController("Generic","MIDI Keyboard + Cliplet","0.1","ad120050-3b2e-11e4-916c-0800200c9a66");var d,e,f=1,g=119,h=a.controller.ClipletController;a.init=function(){b.getMidiInPort(0).setMidiCallback(c);var a=b.getMidiInPort(0).createNoteInput("MIDI Keyboard","??????");a.setShouldConsumeEvents(!1),d=b.createUserControlsSection(g-f+1);for(var i=f;g>=i;i++)d.getControl(i-f).setLabel("CC"+i);e=h.create({numTracks:32,numScenes:32})},a.flush=function(){e.onFlush()},a.exit=function(){e.onExit()}}(this,host);